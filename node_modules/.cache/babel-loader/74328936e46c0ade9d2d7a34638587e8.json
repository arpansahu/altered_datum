{"ast":null,"code":"import _regeneratorRuntime from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Header from'../header';import React,{useState,useEffect}from'react';//MaterialUI\nimport Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';// import Link from '@material-ui/core/Link';\nimport Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import axiosInstance from'../../axios';import{ValidatorForm,TextValidator}from'react-material-ui-form-validator';import VisibilityOffTwoToneIcon from\"@material-ui/icons/VisibilityOffTwoTone\";import VisibilityTwoToneIcon from\"@material-ui/icons/VisibilityTwoTone\";import{link,NavLink,useParams}from'react-router-dom';import InputAdornment from'@material-ui/core/InputAdornment';import Snackbar from\"@material-ui/core/Snackbar\";import SnackbarContent from\"@material-ui/core/SnackbarContent\";import IconButton from\"@material-ui/core/IconButton\";import ErrorIcon from\"@material-ui/icons/Error\";import CheckCircleOutlineIcon from'@material-ui/icons/CheckCircleOutline';import CloseIcon from\"@material-ui/icons/Close\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function FormPropsTextFields(){var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),id=_useState2[0],updateId=_useState2[1];var initialFormData=Object.freeze({password:'',password_two:''});var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user_obj=_useState4[0],setUser_Obj=_useState4[1];useEffect(function(){axiosInstance.get('user/account/').then(function(res){var account=res.data;// console.log(account)\nsetUser_Obj({is_superuser:account.is_staff,username:account.username,email:account.email});updateFormData({username:account.username,about:account.about});updateId(account.id);}).catch(function(err){console.log(\"Inside Error\",err);});},[]);var _useState5=useState(initialFormData),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],updateFormData=_useState6[1];var handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleChange(_x){return _ref.apply(this,arguments);};}();var handleChangeWithSpace=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleChangeWithSpace(_x2){return _ref2.apply(this,arguments);};}();var _useState7=useState({errorOpen:false,error:\"\"}),_useState8=_slicedToArray(_useState7,2),passwordsMatch=_useState8[0],updatePasswordsMatch=_useState8[1];var errorClose=function errorClose(e){updatePasswordsMatch({errorOpen:false,error:\"\"});};var _useState9=useState({messageOpen:false,data:\"\"}),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],updateMessage=_useState10[1];var messageClose=function messageClose(e){updateMessage({messageOpen:false,data:\"\"});};var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(formData);if(formData.username==null&&formData.about==null){// console.log(\"Inside first if\")\nupdatePasswordsMatch({errorOpen:true,error:\"Nothing to update\"});}else if(formData.about==null&&formData.username){updatePasswordsMatch({errorOpen:false,error:\"\"});axiosInstance.patch(\"user/account/update/\"+id+\"/\",{username:formData.username}).then(function(res){console.log(res);updateMessage({messageOpen:true,data:\"Your account details updated Successfully\"});// console.log(res.data);\n// console.log(res.statusText)\n}).catch(function(error){console.log(error);});}else if(formData.about&&formData.username==null){updatePasswordsMatch({errorOpen:false,error:\"\"});axiosInstance.patch(\"user/account/update/\"+id+\"/\",{about:formData.about}).then(function(res){console.log(res);updateMessage({messageOpen:true,data:\"Your account details updated Successfully\"});// console.log(res.data);\n// console.log(res.statusText)\n}).catch(function(error){console.log(error);});}else{updatePasswordsMatch({errorOpen:false,error:\"\"});axiosInstance.patch(\"user/account/update/\"+id+\"/\",{about:formData.about,username:formData.username}).then(function(res){console.log(res);updateMessage({messageOpen:true,data:\"Your account details updated Successfully\"});// console.log(res.data);\n// console.log(res.statusText)\n}).catch(function(error){console.log(error);});}};var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),hidePassword=_useState12[0],setHidePassword=_useState12[1];var showPassword=function showPassword(){// console.log(\"show passsword\", + hidePassword)\nsetHidePassword(!hidePassword);// console.log(\"After show passsword\", + hidePassword)\n};var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),hidePassword_two=_useState14[0],setHidePassword_Two=_useState14[1];var showPassword_two=function showPassword_two(){// console.log(\"show passsword\", + hidePassword_two)\nsetHidePassword_Two(!hidePassword_two);// console.log(\"After show passsword\", + hidePassword_two)\n};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper,style:{whiteSpace:\"pre-line\"}},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Account Details\"),/*#__PURE__*/React.createElement(ValidatorForm,{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",name:\"email\",autoComplete:\"email\",disabled:true,value:user_obj.email}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",name:\"username\"// label=\"Username\"\n,placeholder:formData.username,onChange:handleChange,value:formData.username}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,multiline:true,id:\"about\",name:\"about\",label:\"About\",autoFocus:true,placeholder:formData.about,onChange:handleChangeWithSpace,value:formData.about}),passwordsMatch.error?/*#__PURE__*/React.createElement(Snackbar,{variant:\"error\",key:passwordsMatch.error,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:passwordsMatch.errorOpen,onClose:errorClose,autoHideDuration:3000},/*#__PURE__*/React.createElement(SnackbarContent,{className:classes.error,message:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{style:{marginRight:\"8px\"}},/*#__PURE__*/React.createElement(ErrorIcon,{fontSize:\"large\",color:\"error\"})),/*#__PURE__*/React.createElement(\"span\",null,\" \",passwordsMatch.error,\" \")),action:[/*#__PURE__*/React.createElement(IconButton,{key:\"close\",\"aria-label\":\"close\",onClick:errorClose},/*#__PURE__*/React.createElement(CloseIcon,{color:\"error\"}))]})):null,message.data?/*#__PURE__*/React.createElement(Snackbar,{variant:\"success\",severity:\"success\",key:message.data,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:message.messageOpen,onClose:messageClose,autoHideDuration:3000},/*#__PURE__*/React.createElement(SnackbarContent,{className:classes.success,message:/*#__PURE__*/React.createElement(\"div\",{style:{color:\"green\"}},/*#__PURE__*/React.createElement(\"span\",{style:{marginRight:\"8px\"}},/*#__PURE__*/React.createElement(CheckCircleOutlineIcon,{fontSize:\"large\"})),/*#__PURE__*/React.createElement(\"span\",null,\" \",message.data,\" \")),action:[/*#__PURE__*/React.createElement(IconButton,{key:\"close\",\"aria-label\":\"close\",onClick:messageClose},/*#__PURE__*/React.createElement(CloseIcon,{style:{color:\"green\"}}))]})):null,/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:handleSubmit},\"Update Account details\"),/*#__PURE__*/React.createElement(Button,{href:\"#\",color:\"primary\",variant:\"contained\",fullWidth:true,className:classes.submit,component:NavLink,to:\"/account/passwordupdate\"},\"Update Password\")))));}","map":{"version":3,"sources":["/app/src/components/auth/account.js"],"names":["Header","React","useState","useEffect","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Grid","Typography","makeStyles","Container","axiosInstance","ValidatorForm","TextValidator","VisibilityOffTwoToneIcon","VisibilityTwoToneIcon","link","NavLink","useParams","InputAdornment","Snackbar","SnackbarContent","IconButton","ErrorIcon","CheckCircleOutlineIcon","CloseIcon","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","FormPropsTextFields","classes","id","updateId","initialFormData","Object","freeze","password","password_two","user_obj","setUser_Obj","get","then","res","account","data","is_superuser","is_staff","username","email","updateFormData","about","catch","err","console","log","formData","handleChange","e","target","name","value","trim","handleChangeWithSpace","errorOpen","error","passwordsMatch","updatePasswordsMatch","errorClose","messageOpen","message","updateMessage","messageClose","handleSubmit","preventDefault","patch","hidePassword","setHidePassword","showPassword","hidePassword_two","setHidePassword_Two","showPassword_two","whiteSpace","vertical","horizontal","marginRight","success","color"],"mappings":"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","sourcesContent":["\n\nimport Header from '../header';\n\nimport React, { useState, useEffect } from 'react';\n\n//MaterialUI\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n// import Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport axiosInstance from '../../axios';\nimport { ValidatorForm,TextValidator } from 'react-material-ui-form-validator';\nimport VisibilityOffTwoToneIcon from \"@material-ui/icons/VisibilityOffTwoTone\";\nimport VisibilityTwoToneIcon from \"@material-ui/icons/VisibilityTwoTone\";\nimport { link, NavLink, useParams } from 'react-router-dom';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport CloseIcon from \"@material-ui/icons/Close\";\nconst useStyles = makeStyles((theme) => ({\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(1),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nexport default function FormPropsTextFields() {\n    const classes = useStyles();\n\tconst [id, updateId] = useState(null)\n\n    let initialFormData = Object.freeze({\n\t\tpassword: '',\n\t\tpassword_two: '',\n\t});\n\t\n\tconst[user_obj, setUser_Obj] = useState({})\n\n\tuseEffect(() =>\n\t\t{\n\t\t\taxiosInstance.get('user/account/')\n\t\t\t.then((res) => {\n\t\t\t\tconst account = res.data;\n\t\t\t\t// console.log(account)\n\t\t\t\tsetUser_Obj(\n\t\t\t\t\t{\t\n\t\t\t\t\t\tis_superuser: account.is_staff,\n\t\t\t\t\t\tusername: account.username,\n\t\t\t\t\t\temail: account.email,\t\n\t\t\t\t})\n\t\t\t\tupdateFormData({\n\t\t\t\t\tusername: account.username,\n\t\t\t\t\tabout: account.about\n\t\t\t\t})\n\t\t\t\tupdateId(account.id)\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(\"Inside Error\", err);\n\t\t\t});\t\n\t\t}\n\t\t, []\n\t)\n\tconst [formData, updateFormData] = useState(initialFormData);\n\n    const handleChange = async (e) => {\n        updateFormData({\n            ...formData,\n            [e.target.name]: e.target.value.trim(),\n        });\n    };\n\n\tconst handleChangeWithSpace = async (e) => {\n        updateFormData({\n            ...formData,\n            [e.target.name]: e.target.value,\n        });\n    };\n\tconst [passwordsMatch, updatePasswordsMatch] = useState({errorOpen: false,error: \"\"});\n\n\tconst errorClose = e => {\n\t\tupdatePasswordsMatch({errorOpen: false,error: \"\"});\n\t};\t\n\n\tconst [message, updateMessage] = useState({messageOpen: false, data :\"\"})\n\n\tconst messageClose = e => {\n\t\tupdateMessage({messageOpen: false, data:\"\"});\n\t}\n\n\t\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(formData);\n\t\tif(formData.username == null && formData.about == null\n\t\t\t\n\t\t\t){\n\t\t\t\t// console.log(\"Inside first if\")\n\t\t\tupdatePasswordsMatch({errorOpen: true,error: \"Nothing to update\"});\n\t\t}\n\t\telse if(formData.about == null && formData.username)\n\t\t{\n\t\t\tupdatePasswordsMatch({errorOpen: false,error: \"\"});\n\t\t\taxiosInstance\n\t\t\t.patch(`user/account/update/` + id + `/`, {\n\t\t\t\tusername: formData.username,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tupdateMessage({messageOpen: true,data: \"Your account details updated Successfully\"});\n\t\t\t\t// console.log(res.data);\n\t\t\t\t// console.log(res.statusText)\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} );\n\t\t}\n\t\telse if (formData.about  && formData.username == null){\n\t\t\tupdatePasswordsMatch({errorOpen: false,error: \"\"});\n\t\t\taxiosInstance\n\t\t\t.patch(`user/account/update/` + id + `/`, {\n\t\t\t\tabout: formData.about,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tupdateMessage({messageOpen: true,data: \"Your account details updated Successfully\"});\n\t\t\t\t// console.log(res.data);\n\t\t\t\t// console.log(res.statusText)\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} );\n\t\t}\n\t\telse{\n\t\t\tupdatePasswordsMatch({errorOpen: false,error: \"\"});\n\t\t\taxiosInstance\n\t\t\t.patch(`user/account/update/` + id + `/`, {\n\t\t\t\tabout: formData.about,\n\t\t\t\tusername: formData.username,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tupdateMessage({messageOpen: true,data: \"Your account details updated Successfully\"});\n\t\t\t\t// console.log(res.data);\n\t\t\t\t// console.log(res.statusText)\n\t\t\t})\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} );\n\t\t}\n\t};\n\n\n\n\tconst [hidePassword, setHidePassword] = useState(true);\n\tconst showPassword = () => {\n\t\t// console.log(\"show passsword\", + hidePassword)\n\t\tsetHidePassword(!hidePassword );\n\t\t// console.log(\"After show passsword\", + hidePassword)\n\t};\n\n\tconst [hidePassword_two, setHidePassword_Two] = useState(true);\n\tconst showPassword_two = () => {\n\t\t// console.log(\"show passsword\", + hidePassword_two)\n\t\tsetHidePassword_Two(!hidePassword_two );\n\t\t// console.log(\"After show passsword\", + hidePassword_two)\n\t};\n  return (\n\n        <div className=\"App\">\n\t\t\t<Header />\n\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t<CssBaseline />\n\t\t\t<div className={classes.paper}  style={{whiteSpace:\"pre-line\"}}>\n\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\tAccount Details\n\t\t\t\t</Typography>\n\t\t\t\t\n\t\t\t\t<ValidatorForm className={classes.form} noValidate>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tautoComplete=\"email\"\n\t\t\t\t\t\tdisabled\n                        value={user_obj.email}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\t// label=\"Username\"\n\t\t\t\t\t\tplaceholder={formData.username}\n\t\t\t\t\t\tonChange={handleChange}\n                        value={formData.username}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tmultiline\n\t\t\t\t\t\tid=\"about\"\n\t\t\t\t\t\tname=\"about\"\n\t\t\t\t\t\tlabel=\"About\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tplaceholder={formData.about}\n\t\t\t\t\t\tonChange={handleChangeWithSpace}\n                        value={formData.about}\n\t\t\t\t\t \n\t\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t\t{passwordsMatch.error ? (\n\t\t\t\t\t\t<Snackbar\n\t\t\t\t\t\tvariant=\"error\"\n\t\t\t\t\t\tkey={passwordsMatch.error}\n\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\thorizontal: \"center\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\topen={passwordsMatch.errorOpen}\n\t\t\t\t\t\tonClose={errorClose}\n\t\t\t\t\t\tautoHideDuration={3000}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<SnackbarContent\n\t\t\t\t\t\t\tclassName={classes.error}\n\t\t\t\t\t\t\tmessage={\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span style={{ marginRight: \"8px\" }}>\n\t\t\t\t\t\t\t\t<ErrorIcon fontSize=\"large\" color=\"error\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span> {passwordsMatch.error} </span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction={[\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tkey=\"close\"\n\t\t\t\t\t\t\t\taria-label=\"close\"\n\t\t\t\t\t\t\t\tonClick={errorClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon color=\"error\" />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Snackbar>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{message.data ? (\n\t\t\t\t\t\t<Snackbar\n\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\tseverity=\"success\"\n\t\t\t\t\t\tkey={message.data}\n\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\t\t\thorizontal: \"center\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t\topen={message.messageOpen}\n\t\t\t\t\t\tonClose={messageClose}\n\t\t\t\t\t\tautoHideDuration={3000}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<SnackbarContent\n\t\t\t\t\t\t\tclassName={classes.success}\n\t\t\t\t\t\t\tmessage={\n\t\t\t\t\t\t\t<div style={{color:\"green\"}}>\n\t\t\t\t\t\t\t\t<span style={{ marginRight: \"8px\" }}>\n\t\t\t\t\t\t\t\t<CheckCircleOutlineIcon fontSize=\"large\"   />\n\t\t\t\t\t\t\t\t</span >\n\t\t\t\t\t\t\t\t<span> {message.data} </span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taction={[\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tkey=\"close\"\n\t\t\t\t\t\t\t\taria-label=\"close\"\n\t\t\t\t\t\t\t\tonClick={messageClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon style={{color:\"green\"}} />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Snackbar>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tUpdate Account details\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tcomponent={NavLink}\n\t\t\t\t\t\tto=\"/account/passwordupdate\"\n\t\t\t\t\t>\n\t\t\t\t\t\tUpdate Password\n\t\t\t\t\t</Button>\n\t\t\t\t</ValidatorForm>\n\t\t\t</div>\n\t\t</Container>\n\t\t</div>\n  );\n}"]},"metadata":{},"sourceType":"module"}