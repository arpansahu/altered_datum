{"ast":null,"code":"var _jsxFileName = \"/Users/arpansahu/projects/profile/altered_datum/src/components/admin/create.js\";\nimport React, { useState } from 'react';\nimport axiosInstance from '../../axios';\nimport { useHistory } from 'react-router-dom'; //MaterialUI\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport Header from '../header';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function Create() {\n  //https://gist.github.com/hagemann/382adfc57adbd5af078dc93feef01fe1\n  function slugify(string) {\n    const a = 'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;';\n    const b = 'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';\n    const p = new RegExp(a.split('').join('|'), 'g');\n    return string.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word characters\n    .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n  } //\n\n\n  const history = useHistory();\n  const initialFormData = Object.freeze({\n    title: '',\n    slug: '',\n    excerpt: '',\n    content: ''\n  });\n  const [postData, updateFormData] = useState(initialFormData);\n  const [postimage, setPostImage] = useState(null);\n\n  const handleChange = e => {\n    if ([e.target.name] == 'image') {\n      setPostImage({\n        image: e.target.files\n      });\n      console.log(e.target.files);\n    }\n\n    if ([e.target.name] == 'title') {\n      updateFormData({ ...postData,\n        [e.target.name]: e.target.value.trim(),\n        ['slug']: slugify(e.target.value.trim())\n      });\n    } else {\n      updateFormData({ ...postData,\n        [e.target.name]: e.target.value.trim()\n      });\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let formData = new FormData();\n    formData.append('title', postData.title);\n    formData.append('slug', postData.slug);\n    formData.append('author', 1);\n    formData.append('excerpt', postData.excerpt);\n    formData.append('content', postData.content);\n    formData.append('image', postimage.image[0]);\n    axiosInstance.post('admin/create/', formData).then(response => {\n      history.push({\n        pathname: '/admin/'\n      });\n      window.location.reload();\n    }).catch(error => {\n      console.error('Error creating post:', error); // Handle error, e.g., display an error message to the user\n    });\n  }; // const config = { headers: { 'Content-Type': 'multipart/form-data' } };\n  // const URL = 'http://127.0.0.1:8000/api/admin/creats/';\n  // let formData = new FormData();\n  // formData.append('title', postData.title);\n  // formData.append('slug', postData.slug);\n  // formData.append('author', 1);\n  // formData.append('excerpt', postData.excerpt);\n  // formData.append('content', postData.content);\n  // formData.append('image', postimage.image[0]);\n  // axios\n  // \t.post(URL, formData, config)\n  // \t.then((res) => {\n  // \t\tconsole.log(res.data);\n  // \t})\n  // \t.catch((err) => console.log(err));\n\n\n  const classes = useStyles();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, \"Create New Post\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"title\",\n    label: \"Post Title\",\n    name: \"title\",\n    autoComplete: \"title\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"excerpt\",\n    label: \"Post Excerpt\",\n    name: \"excerpt\",\n    autoComplete: \"excerpt\",\n    onChange: handleChange,\n    multiline: true,\n    rows: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"slug\",\n    label: \"slug\",\n    name: \"slug\",\n    autoComplete: \"slug\",\n    value: postData.slug,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"content\",\n    label: \"content\",\n    name: \"content\",\n    autoComplete: \"content\",\n    onChange: handleChange,\n    multiline: true,\n    rows: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    align: \"center\",\n    variant: \"contained\",\n    component: \"label\",\n    style: {\n      margin: '0 auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    accept: \"image/*\" // className={classes.input}\n    ,\n    id: \"post-image\",\n    onChange: handleChange,\n    name: \"image\",\n    type: \"file\",\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    color: \"primary\",\n    \"aria-label\": \"upload picture\",\n    component: \"span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(PhotoCamera, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  })))), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 6\n    }\n  }, \"Create Post\")))));\n}","map":{"version":3,"sources":["/Users/arpansahu/projects/profile/altered_datum/src/components/admin/create.js"],"names":["React","useState","axiosInstance","useHistory","Avatar","Button","CssBaseline","TextField","Grid","Typography","makeStyles","Container","IconButton","PhotoCamera","Header","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Create","slugify","string","a","b","p","RegExp","split","join","toString","toLowerCase","replace","c","charAt","indexOf","history","initialFormData","Object","freeze","title","slug","excerpt","content","postData","updateFormData","postimage","setPostImage","handleChange","e","target","name","image","files","console","log","value","trim","handleSubmit","preventDefault","formData","FormData","append","post","then","response","push","pathname","window","location","reload","catch","error","classes"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axiosInstance from '../../axios';\nimport { useHistory } from 'react-router-dom';\n//MaterialUI\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport Header from '../header';\nconst useStyles = makeStyles((theme) => ({\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tavatar: {\n\t\tmargin: theme.spacing(1),\n\t\tbackgroundColor: theme.palette.secondary.main,\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(3),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n\n}));\n\nexport default function Create() {\n\t//https://gist.github.com/hagemann/382adfc57adbd5af078dc93feef01fe1\n\tfunction slugify(string) {\n\t\tconst a =\n\t\t\t'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;';\n\t\tconst b =\n\t\t\t'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';\n\t\tconst p = new RegExp(a.split('').join('|'), 'g');\n\n\t\treturn string\n\t\t\t.toString()\n\t\t\t.toLowerCase()\n\t\t\t.replace(/\\s+/g, '-') // Replace spaces with -\n\t\t\t.replace(p, (c) => b.charAt(a.indexOf(c))) // Replace special characters\n\t\t\t.replace(/&/g, '-and-') // Replace & with 'and'\n\t\t\t.replace(/[^\\w\\-]+/g, '') // Remove all non-word characters\n\t\t\t.replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n\t\t\t.replace(/^-+/, '') // Trim - from start of text\n\t\t\t.replace(/-+$/, ''); // Trim - from end of text\n\t}\n\t//\n\n\tconst history = useHistory();\n\tconst initialFormData = Object.freeze({\n\t\ttitle: '',\n\t\tslug: '',\n\t\texcerpt: '',\n\t\tcontent: '',\n\t});\n\n\tconst [postData, updateFormData] = useState(initialFormData);\n\tconst [postimage, setPostImage] = useState(null);\n\n\tconst handleChange = (e) => {\n\t\tif ([e.target.name] == 'image') {\n\t\t\tsetPostImage({\n\t\t\t\timage: e.target.files,\n\t\t\t});\n\t\t\tconsole.log(e.target.files);\n\t\t}\n\t\tif ([e.target.name] == 'title') {\n\t\t\tupdateFormData({\n\t\t\t\t...postData,\n\t\t\t\t[e.target.name]: e.target.value.trim(),\n\t\t\t\t['slug']: slugify(e.target.value.trim()),\n\t\t\t});\n\t\t} else {\n\t\t\tupdateFormData({\n\t\t\t\t...postData,\n\t\t\t\t[e.target.name]: e.target.value.trim(),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tlet formData = new FormData();\n\t\tformData.append('title', postData.title);\n\t\tformData.append('slug', postData.slug);\n\t\tformData.append('author', 1);\n\t\tformData.append('excerpt', postData.excerpt);\n\t\tformData.append('content', postData.content);\n\t\tformData.append('image', postimage.image[0]);\n\t\taxiosInstance.post('admin/create/', formData)\n\t\t.then((response) => {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/admin/',\n\t\t\t});\n\t\t\twindow.location.reload();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error creating post:', error);\n\t\t\t// Handle error, e.g., display an error message to the user\n\t\t});\n\t};\n\n\t// const config = { headers: { 'Content-Type': 'multipart/form-data' } };\n\t// const URL = 'http://127.0.0.1:8000/api/admin/creats/';\n\t// let formData = new FormData();\n\t// formData.append('title', postData.title);\n\t// formData.append('slug', postData.slug);\n\t// formData.append('author', 1);\n\t// formData.append('excerpt', postData.excerpt);\n\t// formData.append('content', postData.content);\n\t// formData.append('image', postimage.image[0]);\n\t// axios\n\t// \t.post(URL, formData, config)\n\t// \t.then((res) => {\n\t// \t\tconsole.log(res.data);\n\t// \t})\n\t// \t.catch((err) => console.log(err));\n\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Header />\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t<CssBaseline />\n\t\t\t<div className={classes.paper}>\n\t\t\t\t{/* <Avatar className={classes.avatar}></Avatar> */}\n\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\tCreate New Post\n\t\t\t\t</Typography>\n\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"title\"\n\t\t\t\t\t\t\t\tlabel=\"Post Title\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tautoComplete=\"title\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"excerpt\"\n\t\t\t\t\t\t\t\tlabel=\"Post Excerpt\"\n\t\t\t\t\t\t\t\tname=\"excerpt\"\n\t\t\t\t\t\t\t\tautoComplete=\"excerpt\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"slug\"\n\t\t\t\t\t\t\t\tlabel=\"slug\"\n\t\t\t\t\t\t\t\tname=\"slug\"\n\t\t\t\t\t\t\t\tautoComplete=\"slug\"\n\t\t\t\t\t\t\t\tvalue={postData.slug}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"content\"\n\t\t\t\t\t\t\t\tlabel=\"content\"\n\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\tautoComplete=\"content\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{/* <input\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\tid=\"post-image\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"image\"\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t/> */}\n\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\talign='center'\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcomponent=\"label\"\n\t\t\t\t\t\t\tstyle={{margin: '0 auto'}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t// className={classes.input}\n\t\t\t\t\t\t\tid=\"post-image\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tname=\"image\"\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tstyle={{ display: 'none'}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<IconButton color=\"primary\" aria-label=\"upload picture\" component=\"span\">\n\t\t\t\t\t\t\t\t<PhotoCamera />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t</Grid>\n\t\t\t\t\t\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tCreate Post\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</Container>\n\t\t</div>\n\t);\n}"]},"metadata":{},"sourceType":"module"}