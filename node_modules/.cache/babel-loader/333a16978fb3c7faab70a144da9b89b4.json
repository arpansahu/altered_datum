{"ast":null,"code":"import React,{useState,useEffect}from'react';import{AppBar,Toolbar,Typography,CssBaseline,Link,Button}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import{NavLink,useHistory,useLocation}from'react-router-dom';// Import useLocation\nimport SearchBar from'material-ui-search-bar';import axiosInstance from'../axios';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import logo from'../logo.png';const useStyles=makeStyles(theme=>({appBar:{color:'white'},link:{margin:theme.spacing(1,1.5)},toolbarTitle:{flexGrow:1},toolbar:{minHeight:'100px'},logo:{maxWidth:80,maxHeight:80,borderRadius:10,flexGrow:1},back:{alignSelf:'center',color:\"primary\",marginBlockStart:0,marginBlockEnd:0}}));function Header(){const classes=useStyles();const history=useHistory();const location=useLocation();// Use useLocation to get the current path\nconst[appState,setAppState]=useState({token:localStorage.getItem('access_token'),user_data:{is_superuser:false,username:null,email:null,id:null,is_active:false,is_email_verified:false}});const[data,setData]=useState({search:''});const path=location.pathname;// Get the current path from useLocation\nuseEffect(()=>{if(appState.token){axiosInstance.get('user/account/').then(res=>{const account=res.data;setAppState(prevState=>({...prevState,user_data:{is_superuser:account.is_staff,username:account.username,email:account.email,id:account.id,is_active:account.is_active,is_email_verified:account.is_email_verified}}));if(!account.is_email_verified){history.push('/unverified');}}).catch(err=>{console.error(\"Error fetching account data:\",err);});}},[path,appState.token]);const goSearch=()=>{history.push({pathname:'/search/',search:'?search='+data.search});window.location.reload();};const goBack=()=>{history.goBack();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(AppBar,{position:\"static\",color:\"default\",elevation:0,className:classes.appBar},/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},/*#__PURE__*/React.createElement(Link,{component:NavLink,to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"Altered Datum Logo\",className:classes.logo})),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",color:\"inherit\",noWrap:true,className:classes.toolbarTitle}),/*#__PURE__*/React.createElement(Button,{startIcon:/*#__PURE__*/React.createElement(ArrowBackIcon,null),color:\"primary\",variant:\"outlined\",className:classes.back,onClick:goBack},\"Back\"),appState.token&&/*#__PURE__*/React.createElement(SearchBar,{value:data.search,onChange:newValue=>setData({search:newValue}),onRequestSearch:goSearch}),appState.user_data.is_superuser&&/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"outlined\",className:classes.link,component:NavLink,to:\"/admin\"},\"Admin Panel\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"outlined\",className:classes.link,component:NavLink,to:\"/account/\"},\"My Account\"),/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"outlined\",className:classes.link,component:NavLink,to:\"/logout\"},\"Logout\"))));}export default Header;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Toolbar","Typography","CssBaseline","Link","Button","makeStyles","NavLink","useHistory","useLocation","SearchBar","axiosInstance","ArrowBackIcon","logo","useStyles","theme","appBar","color","link","margin","spacing","toolbarTitle","flexGrow","toolbar","minHeight","maxWidth","maxHeight","borderRadius","back","alignSelf","marginBlockStart","marginBlockEnd","Header","classes","history","location","appState","setAppState","token","localStorage","getItem","user_data","is_superuser","username","email","id","is_active","is_email_verified","data","setData","search","path","pathname","get","then","res","account","prevState","is_staff","push","catch","err","console","error","goSearch","window","reload","goBack","createElement","Fragment","position","elevation","className","component","to","src","alt","variant","noWrap","startIcon","onClick","value","onChange","newValue","onRequestSearch"],"sources":["/app/src/components/header.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppBar, Toolbar, Typography, CssBaseline, Link, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { NavLink, useHistory, useLocation } from 'react-router-dom'; // Import useLocation\nimport SearchBar from 'material-ui-search-bar';\nimport axiosInstance from '../axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport logo from '../logo.png';\n\nconst useStyles = makeStyles((theme) => ({\n    appBar: {\n        color: 'white',\n    },\n    link: {\n        margin: theme.spacing(1, 1.5),\n    },\n    toolbarTitle: {\n        flexGrow: 1,\n    },\n    toolbar: {\n        minHeight: '100px',\n    },\n    logo: {\n        maxWidth: 80,\n        maxHeight: 80,\n        borderRadius: 10,\n        flexGrow: 1,\n    },\n    back: {\n        alignSelf: 'center',\n        color: \"primary\",\n        marginBlockStart: 0,\n        marginBlockEnd: 0,\n    },\n}));\n\nfunction Header() {\n    const classes = useStyles();\n    const history = useHistory();\n    const location = useLocation(); // Use useLocation to get the current path\n\n    const [appState, setAppState] = useState({\n        token: localStorage.getItem('access_token'),\n        user_data: {\n            is_superuser: false,\n            username: null,\n            email: null,\n            id: null,\n            is_active: false,\n            is_email_verified: false,\n        },\n    });\n\n    const [data, setData] = useState({ search: '' });\n    const path = location.pathname; // Get the current path from useLocation\n\n    useEffect(() => {\n        if (appState.token) {\n            axiosInstance.get('user/account/')\n                .then((res) => {\n                    const account = res.data;\n                    setAppState((prevState) => ({\n                        ...prevState,\n                        user_data: {\n                            is_superuser: account.is_staff,\n                            username: account.username,\n                            email: account.email,\n                            id: account.id,\n                            is_active: account.is_active,\n                            is_email_verified: account.is_email_verified,\n                        },\n                    }));\n\n                    if (!account.is_email_verified) {\n                        history.push('/unverified');\n                    }\n                })\n                .catch((err) => {\n                    console.error(\"Error fetching account data:\", err);\n                });\n        }\n    }, [path, appState.token]);\n\n    const goSearch = () => {\n        history.push({\n            pathname: '/search/',\n            search: '?search=' + data.search,\n        });\n        window.location.reload();\n    };\n\n    const goBack = () => {\n        history.goBack();\n    };\n\n    return (\n        <React.Fragment>\n            <CssBaseline />\n            <AppBar\n                position=\"static\"\n                color=\"default\"\n                elevation={0}\n                className={classes.appBar}\n            >\n                <Toolbar className={classes.toolbar}>\n                    <Link component={NavLink} to=\"/\">\n                        <img src={logo} alt=\"Altered Datum Logo\" className={classes.logo} />\n                    </Link>\n\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.toolbarTitle}></Typography>\n\n                    <Button\n                        startIcon={<ArrowBackIcon />}\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.back}\n                        onClick={goBack}\n                    >\n                        Back\n                    </Button>\n\n                    {appState.token && (\n                        <SearchBar\n                            value={data.search}\n                            onChange={(newValue) => setData({ search: newValue })}\n                            onRequestSearch={goSearch}\n                        />\n                    )}\n\n                    {appState.user_data.is_superuser && (\n                        <Button\n                            color=\"primary\"\n                            variant=\"outlined\"\n                            className={classes.link}\n                            component={NavLink}\n                            to=\"/admin\"\n                        >\n                            Admin Panel\n                        </Button>\n                    )}\n\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.link}\n                        component={NavLink}\n                        to=\"/account/\"\n                    >\n                        My Account\n                    </Button>\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.link}\n                        component={NavLink}\n                        to=\"/logout\"\n                    >\n                        Logout\n                    </Button>\n                </Toolbar>\n            </AppBar>\n        </React.Fragment>\n    );\n}\n\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}