{"ast":null,"code":"import HeaderForGuest from'../headerforguest';import React,{useState,useEffect}from'react';import{useParams,useHistory}from'react-router-dom';// MaterialUI\nimport CssBaseline from'@material-ui/core/CssBaseline';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import axiosInstance from'../../axios';const useStyles=makeStyles(theme=>({paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},h4:{color:'green','&.error':{color:'red'}}}));export default function ActivateAccount(){const classes=useStyles();const{uidb64,token}=useParams();const[message,setMessage]=useState('');const[error,setError]=useState(false);const history=useHistory();useEffect(()=>{let isMounted=true;// To avoid state update if the component is unmounted\naxiosInstance.post(`user/account/activate/`,{uidb64:uidb64,token:token}).then(res=>{if(isMounted){setMessage(res.data);setError(false);setTimeout(()=>{history.push('/logout');},5000);}}).catch(err=>{if(isMounted){console.error('Error during activation:',err);setMessage('Activation failed. Please try again or contact support.');setError(true);}});return()=>{isMounted=false;// Cleanup to prevent setting state after unmount\n};},[uidb64,token,history]);return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(HeaderForGuest,null),/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper,style:{whiteSpace:'pre-line'}},/*#__PURE__*/React.createElement(\"h4\",{className:`${classes.h4} ${error?'error':''}`,\"aria-live\":\"polite\"},message))));}","map":{"version":3,"names":["HeaderForGuest","React","useState","useEffect","useParams","useHistory","CssBaseline","makeStyles","Container","axiosInstance","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","h4","color","ActivateAccount","classes","uidb64","token","message","setMessage","error","setError","history","isMounted","post","then","res","data","setTimeout","push","catch","err","console","createElement","className","component","maxWidth","style","whiteSpace"],"sources":["/app/src/components/auth/activate.js"],"sourcesContent":["import HeaderForGuest from '../headerforguest';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n// MaterialUI\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport axiosInstance from '../../axios';\n\nconst useStyles = makeStyles((theme) => ({\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\th4: {\n\t\tcolor: 'green',\n\t\t'&.error': {\n\t\t\tcolor: 'red',\n\t\t},\n\t},\n}));\n\nexport default function ActivateAccount() {\n\tconst classes = useStyles();\n\tconst { uidb64, token } = useParams();\n\tconst [message, setMessage] = useState('');\n\tconst [error, setError] = useState(false);\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tlet isMounted = true; // To avoid state update if the component is unmounted\n\n\t\taxiosInstance\n\t\t\t.post(`user/account/activate/`, {\n\t\t\t\tuidb64: uidb64,\n\t\t\t\ttoken: token,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (isMounted) {\n\t\t\t\t\tsetMessage(res.data);\n\t\t\t\t\tsetError(false);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\thistory.push('/logout');\n\t\t\t\t\t}, 5000);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (isMounted) {\n\t\t\t\t\tconsole.error('Error during activation:', err);\n\t\t\t\t\tsetMessage('Activation failed. Please try again or contact support.');\n\t\t\t\t\tsetError(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn () => {\n\t\t\tisMounted = false; // Cleanup to prevent setting state after unmount\n\t\t};\n\t}, [uidb64, token, history]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<HeaderForGuest />\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper} style={{ whiteSpace: 'pre-line' }}>\n\t\t\t\t\t<h4 className={`${classes.h4} ${error ? 'error' : ''}`} aria-live=\"polite\">\n\t\t\t\t\t\t{message}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t</div>\n\t);\n}"],"mappings":"AAAA,MAAO,CAAAA,cAAc,KAAM,mBAAmB,CAC9C,MAAO,CAAAC,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,UAAU,KAAQ,kBAAkB,CACxD;AACA,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CACvD,OAASC,UAAU,KAAQ,0BAA0B,CACrD,MAAO,CAAAC,SAAS,KAAM,6BAA6B,CACnD,MAAO,CAAAC,aAAa,KAAM,aAAa,CAEvC,KAAM,CAAAC,SAAS,CAAGH,UAAU,CAAEI,KAAK,GAAM,CACxCC,KAAK,CAAE,CACNC,SAAS,CAAEF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAC3BC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QACb,CAAC,CACDC,EAAE,CAAE,CACHC,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,CACVA,KAAK,CAAE,KACR,CACD,CACD,CAAC,CAAC,CAAC,CAEH,cAAe,SAAS,CAAAC,eAAeA,CAAA,CAAG,CACzC,KAAM,CAAAC,OAAO,CAAGX,SAAS,CAAC,CAAC,CAC3B,KAAM,CAAEY,MAAM,CAAEC,KAAM,CAAC,CAAGnB,SAAS,CAAC,CAAC,CACrC,KAAM,CAACoB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACwB,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACzC,KAAM,CAAA0B,OAAO,CAAGvB,UAAU,CAAC,CAAC,CAE5BF,SAAS,CAAC,IAAM,CACf,GAAI,CAAA0B,SAAS,CAAG,IAAI,CAAE;AAEtBpB,aAAa,CACXqB,IAAI,CAAC,wBAAwB,CAAE,CAC/BR,MAAM,CAAEA,MAAM,CACdC,KAAK,CAAEA,KACR,CAAC,CAAC,CACDQ,IAAI,CAAEC,GAAG,EAAK,CACd,GAAIH,SAAS,CAAE,CACdJ,UAAU,CAACO,GAAG,CAACC,IAAI,CAAC,CACpBN,QAAQ,CAAC,KAAK,CAAC,CACfO,UAAU,CAAC,IAAM,CAChBN,OAAO,CAACO,IAAI,CAAC,SAAS,CAAC,CACxB,CAAC,CAAE,IAAI,CAAC,CACT,CACD,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,EAAK,CACf,GAAIR,SAAS,CAAE,CACdS,OAAO,CAACZ,KAAK,CAAC,0BAA0B,CAAEW,GAAG,CAAC,CAC9CZ,UAAU,CAAC,yDAAyD,CAAC,CACrEE,QAAQ,CAAC,IAAI,CAAC,CACf,CACD,CAAC,CAAC,CAEH,MAAO,IAAM,CACZE,SAAS,CAAG,KAAK,CAAE;AACpB,CAAC,CACF,CAAC,CAAE,CAACP,MAAM,CAAEC,KAAK,CAAEK,OAAO,CAAC,CAAC,CAE5B,mBACC3B,KAAA,CAAAsC,aAAA,QAAKC,SAAS,CAAC,KAAK,eACnBvC,KAAA,CAAAsC,aAAA,CAACvC,cAAc,KAAE,CAAC,cAClBC,KAAA,CAAAsC,aAAA,CAAC/B,SAAS,EAACiC,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAC,IAAI,eACxCzC,KAAA,CAAAsC,aAAA,CAACjC,WAAW,KAAE,CAAC,cACfL,KAAA,CAAAsC,aAAA,QAAKC,SAAS,CAAEnB,OAAO,CAACT,KAAM,CAAC+B,KAAK,CAAE,CAAEC,UAAU,CAAE,UAAW,CAAE,eAChE3C,KAAA,CAAAsC,aAAA,OAAIC,SAAS,CAAE,GAAGnB,OAAO,CAACH,EAAE,IAAIQ,KAAK,CAAG,OAAO,CAAG,EAAE,EAAG,CAAC,YAAU,QAAQ,EACxEF,OACE,CACA,CACK,CACP,CAAC,CAER","ignoreList":[]},"metadata":{},"sourceType":"module"}