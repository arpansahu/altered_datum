{"ast":null,"code":"var _jsxFileName = \"/Users/arpansahu/projects/profile/altered_datum/src/components/header.js\";\nimport React, { useState, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport logo from '../logo.png';\nimport SearchBar from 'material-ui-search-bar';\nimport axiosInstance from '../axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    color: 'white'\n  },\n  link: {\n    margin: theme.spacing(1, 1.5)\n  },\n  toolbarTitle: {\n    flexGrow: 1\n  },\n  toolbar: {\n    minHeight: '100px'\n  },\n  logo: {\n    maxWidth: 80,\n    maxHeight: 80,\n    borderRadius: 10,\n    flexGrow: 1\n  },\n  back: {\n    alignSelf: 'center',\n    color: 'primary',\n    marginBlockStart: 0,\n    marginBlockEnd: 0\n  }\n}));\n\nfunction Header() {\n  const history = useHistory();\n  const classes = useStyles();\n  const [data, setData] = useState({\n    search: ''\n  });\n  const [appState, setAppState] = useState({\n    token: localStorage.getItem('access_token'),\n    user_data: {\n      is_superuser: false,\n      username: null,\n      email: null,\n      id: null,\n      is_active: false,\n      is_email_verified: false\n    }\n  });\n  useEffect(() => {\n    if (appState.token) {\n      axiosInstance.get('user/account/').then(res => {\n        const account = res.data;\n        setAppState(prevState => ({ ...prevState,\n          user_data: {\n            is_superuser: account.is_staff,\n            username: account.username,\n            email: account.email,\n            id: account.id,\n            is_active: account.is_active,\n            is_email_verified: account.is_email_verified\n          }\n        }));\n\n        if (!account.is_email_verified) {\n          history.push('/unverified');\n        }\n      }).catch(err => {\n        console.error(\"Error fetching user account data\", err);\n      });\n    }\n  }, [appState.token, history]);\n\n  const goSearch = () => {\n    history.push({\n      pathname: '/search/',\n      search: '?search=' + data.search\n    });\n    window.location.reload();\n  };\n\n  const goBack = () => {\n    history.goBack();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    elevation: 0,\n    className: classes.appBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    component: NavLink,\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"Altered Datum Logo\",\n    className: classes.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    noWrap: true,\n    className: classes.toolbarTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.back,\n    onClick: goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(ArrowBackIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  })), appState.token && /*#__PURE__*/React.createElement(SearchBar, {\n    value: data.search,\n    onChange: newValue => setData({\n      search: newValue\n    }),\n    onRequestSearch: goSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }), appState.user_data.is_superuser && /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"Admin Panel\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/account/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 6\n    }\n  }, \"My Account\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 6\n    }\n  }, \"Logout\"))));\n}\n\nexport default Header;","map":{"version":3,"sources":["/Users/arpansahu/projects/profile/altered_datum/src/components/header.js"],"names":["React","useState","useEffect","AppBar","Toolbar","Typography","CssBaseline","makeStyles","NavLink","useHistory","Link","Button","logo","SearchBar","axiosInstance","ArrowBackIcon","useStyles","theme","appBar","color","link","margin","spacing","toolbarTitle","flexGrow","toolbar","minHeight","maxWidth","maxHeight","borderRadius","back","alignSelf","marginBlockStart","marginBlockEnd","Header","history","classes","data","setData","search","appState","setAppState","token","localStorage","getItem","user_data","is_superuser","username","email","id","is_active","is_email_verified","get","then","res","account","prevState","is_staff","push","catch","err","console","error","goSearch","pathname","window","location","reload","goBack","newValue"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport logo from '../logo.png';\nimport SearchBar from 'material-ui-search-bar';\nimport axiosInstance from '../axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n\nconst useStyles = makeStyles((theme) => ({\n\tappBar: {\n\t\tcolor: 'white',\n\t},\n\tlink: {\n\t\tmargin: theme.spacing(1, 1.5),\n\t},\n\ttoolbarTitle: {\n\t\tflexGrow: 1,\n\t},\n\ttoolbar: {\n\t\tminHeight: '100px',\n\t},\n\tlogo: {\n\t\tmaxWidth: 80,\n\t\tmaxHeight: 80,\n\t\tborderRadius: 10,\n\t\tflexGrow: 1,\n\t},\n\tback: {\n\t\talignSelf: 'center',\n\t\tcolor: 'primary',\n\t\tmarginBlockStart: 0,\n\t\tmarginBlockEnd: 0,\n\t},\n}));\n\nfunction Header() {\n\tconst history = useHistory();\n\tconst classes = useStyles();\n\tconst [data, setData] = useState({ search: '' });\n\tconst [appState, setAppState] = useState({\n\t\ttoken: localStorage.getItem('access_token'),\n\t\tuser_data: {\n\t\t\tis_superuser: false,\n\t\t\tusername: null,\n\t\t\temail: null,\n\t\t\tid: null,\n\t\t\tis_active: false,\n\t\t\tis_email_verified: false,\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tif (appState.token) {\n\t\t\taxiosInstance\n\t\t\t\t.get('user/account/')\n\t\t\t\t.then((res) => {\n\t\t\t\t\tconst account = res.data;\n\t\t\t\t\tsetAppState((prevState) => ({\n\t\t\t\t\t\t...prevState,\n\t\t\t\t\t\tuser_data: {\n\t\t\t\t\t\t\tis_superuser: account.is_staff,\n\t\t\t\t\t\t\tusername: account.username,\n\t\t\t\t\t\t\temail: account.email,\n\t\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\t\tis_active: account.is_active,\n\t\t\t\t\t\t\tis_email_verified: account.is_email_verified,\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\n\t\t\t\t\tif (!account.is_email_verified) {\n\t\t\t\t\t\thistory.push('/unverified');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Error fetching user account data\", err);\n\t\t\t\t});\n\t\t}\n\t}, [appState.token, history]);\n\n\tconst goSearch = () => {\n\t\thistory.push({\n\t\t\tpathname: '/search/',\n\t\t\tsearch: '?search=' + data.search,\n\t\t});\n\t\twindow.location.reload();\n\t};\n\n\tconst goBack = () => {\n\t\thistory.goBack();\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<CssBaseline />\n\t\t\t<AppBar position=\"static\" color=\"default\" elevation={0} className={classes.appBar}>\n\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t<Link component={NavLink} to=\"/\">\n\t\t\t\t\t\t<img src={logo} alt=\"Altered Datum Logo\" className={classes.logo} />\n\t\t\t\t\t</Link>\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.toolbarTitle}></Typography>\n\t\t\t\t\t<Button className={classes.back} onClick={goBack}>\n\t\t\t\t\t\t<ArrowBackIcon />\n\t\t\t\t\t</Button>\n\t\t\t\t\t{appState.token && (\n\t\t\t\t\t\t<SearchBar\n\t\t\t\t\t\t\tvalue={data.search}\n\t\t\t\t\t\t\tonChange={(newValue) => setData({ search: newValue })}\n\t\t\t\t\t\t\tonRequestSearch={goSearch}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{appState.user_data.is_superuser && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\t\tcomponent={NavLink}\n\t\t\t\t\t\t\tto=\"/admin\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdmin Panel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\tcomponent={NavLink}\n\t\t\t\t\t\tto=\"/account/\"\n\t\t\t\t\t>\n\t\t\t\t\t\tMy Account\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tclassName={classes.link}\n\t\t\t\t\t\tcomponent={NavLink}\n\t\t\t\t\t\tto=\"/logout\"\n\t\t\t\t\t>\n\t\t\t\t\t\tLogout\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}