{"ast":null,"code":"var _jsxFileName = \"/Users/arpansahu/projects/profile/altered_datum/src/components/header.js\";\nimport React, { useState, useEffect } from 'react';\nimport { AppBar, Toolbar, Typography, CssBaseline, Link, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { NavLink, useHistory, useLocation } from 'react-router-dom'; // Import useLocation\n\nimport SearchBar from 'material-ui-search-bar';\nimport axiosInstance from '../axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport logo from '../logo.png';\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    color: 'white'\n  },\n  link: {\n    margin: theme.spacing(1, 1.5)\n  },\n  toolbarTitle: {\n    flexGrow: 1\n  },\n  toolbar: {\n    minHeight: '100px'\n  },\n  logo: {\n    maxWidth: 80,\n    maxHeight: 80,\n    borderRadius: 10,\n    flexGrow: 1\n  },\n  back: {\n    alignSelf: 'center',\n    color: \"primary\",\n    marginBlockStart: 0,\n    marginBlockEnd: 0\n  }\n}));\n\nfunction Header() {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation(); // Use useLocation to get the current path\n\n  const [appState, setAppState] = useState({\n    token: localStorage.getItem('access_token'),\n    user_data: {\n      is_superuser: false,\n      username: null,\n      email: null,\n      id: null,\n      is_active: false,\n      is_email_verified: false\n    }\n  });\n  const [data, setData] = useState({\n    search: ''\n  });\n  const path = location.pathname; // Get the current path from useLocation\n\n  useEffect(() => {\n    if (appState.token) {\n      axiosInstance.get('user/account/').then(res => {\n        const account = res.data;\n        setAppState(prevState => ({ ...prevState,\n          user_data: {\n            is_superuser: account.is_staff,\n            username: account.username,\n            email: account.email,\n            id: account.id,\n            is_active: account.is_active,\n            is_email_verified: account.is_email_verified\n          }\n        }));\n\n        if (!account.is_email_verified) {\n          history.push('/unverified');\n        }\n      }).catch(err => {\n        console.error(\"Error fetching account data:\", err);\n      });\n    }\n  }, [path, appState.token]);\n\n  const goSearch = () => {\n    history.push({\n      pathname: '/search/',\n      search: '?search=' + data.search\n    });\n    window.location.reload();\n  };\n\n  const goBack = () => {\n    history.goBack();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    elevation: 0,\n    className: classes.appBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    component: NavLink,\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"Altered Datum Logo\",\n    className: classes.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    noWrap: true,\n    className: classes.toolbarTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    startIcon: /*#__PURE__*/React.createElement(ArrowBackIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 36\n      }\n    }),\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.back,\n    onClick: goBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, \"Back\"), appState.token && /*#__PURE__*/React.createElement(SearchBar, {\n    value: data.search,\n    onChange: newValue => setData({\n      search: newValue\n    }),\n    onRequestSearch: goSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }), appState.user_data.is_superuser && /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, \"Admin Panel\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/account/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"My Account\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    component: NavLink,\n    to: \"/logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, \"Logout\"))));\n}\n\nexport default Header;","map":{"version":3,"sources":["/Users/arpansahu/projects/profile/altered_datum/src/components/header.js"],"names":["React","useState","useEffect","AppBar","Toolbar","Typography","CssBaseline","Link","Button","makeStyles","NavLink","useHistory","useLocation","SearchBar","axiosInstance","ArrowBackIcon","logo","useStyles","theme","appBar","color","link","margin","spacing","toolbarTitle","flexGrow","toolbar","minHeight","maxWidth","maxHeight","borderRadius","back","alignSelf","marginBlockStart","marginBlockEnd","Header","classes","history","location","appState","setAppState","token","localStorage","getItem","user_data","is_superuser","username","email","id","is_active","is_email_verified","data","setData","search","path","pathname","get","then","res","account","prevState","is_staff","push","catch","err","console","error","goSearch","window","reload","goBack","newValue"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppBar, Toolbar, Typography, CssBaseline, Link, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { NavLink, useHistory, useLocation } from 'react-router-dom'; // Import useLocation\nimport SearchBar from 'material-ui-search-bar';\nimport axiosInstance from '../axios';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport logo from '../logo.png';\n\nconst useStyles = makeStyles((theme) => ({\n    appBar: {\n        color: 'white',\n    },\n    link: {\n        margin: theme.spacing(1, 1.5),\n    },\n    toolbarTitle: {\n        flexGrow: 1,\n    },\n    toolbar: {\n        minHeight: '100px',\n    },\n    logo: {\n        maxWidth: 80,\n        maxHeight: 80,\n        borderRadius: 10,\n        flexGrow: 1,\n    },\n    back: {\n        alignSelf: 'center',\n        color: \"primary\",\n        marginBlockStart: 0,\n        marginBlockEnd: 0,\n    },\n}));\n\nfunction Header() {\n    const classes = useStyles();\n    const history = useHistory();\n    const location = useLocation(); // Use useLocation to get the current path\n\n    const [appState, setAppState] = useState({\n        token: localStorage.getItem('access_token'),\n        user_data: {\n            is_superuser: false,\n            username: null,\n            email: null,\n            id: null,\n            is_active: false,\n            is_email_verified: false,\n        },\n    });\n\n    const [data, setData] = useState({ search: '' });\n    const path = location.pathname; // Get the current path from useLocation\n\n    useEffect(() => {\n        if (appState.token) {\n            axiosInstance.get('user/account/')\n                .then((res) => {\n                    const account = res.data;\n                    setAppState((prevState) => ({\n                        ...prevState,\n                        user_data: {\n                            is_superuser: account.is_staff,\n                            username: account.username,\n                            email: account.email,\n                            id: account.id,\n                            is_active: account.is_active,\n                            is_email_verified: account.is_email_verified,\n                        },\n                    }));\n\n                    if (!account.is_email_verified) {\n                        history.push('/unverified');\n                    }\n                })\n                .catch((err) => {\n                    console.error(\"Error fetching account data:\", err);\n                });\n        }\n    }, [path, appState.token]);\n\n    const goSearch = () => {\n        history.push({\n            pathname: '/search/',\n            search: '?search=' + data.search,\n        });\n        window.location.reload();\n    };\n\n    const goBack = () => {\n        history.goBack();\n    };\n\n    return (\n        <React.Fragment>\n            <CssBaseline />\n            <AppBar\n                position=\"static\"\n                color=\"default\"\n                elevation={0}\n                className={classes.appBar}\n            >\n                <Toolbar className={classes.toolbar}>\n                    <Link component={NavLink} to=\"/\">\n                        <img src={logo} alt=\"Altered Datum Logo\" className={classes.logo} />\n                    </Link>\n\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.toolbarTitle}></Typography>\n\n                    <Button\n                        startIcon={<ArrowBackIcon />}\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.back}\n                        onClick={goBack}\n                    >\n                        Back\n                    </Button>\n\n                    {appState.token && (\n                        <SearchBar\n                            value={data.search}\n                            onChange={(newValue) => setData({ search: newValue })}\n                            onRequestSearch={goSearch}\n                        />\n                    )}\n\n                    {appState.user_data.is_superuser && (\n                        <Button\n                            color=\"primary\"\n                            variant=\"outlined\"\n                            className={classes.link}\n                            component={NavLink}\n                            to=\"/admin\"\n                        >\n                            Admin Panel\n                        </Button>\n                    )}\n\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.link}\n                        component={NavLink}\n                        to=\"/account/\"\n                    >\n                        My Account\n                    </Button>\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        className={classes.link}\n                        component={NavLink}\n                        to=\"/logout\"\n                    >\n                        Logout\n                    </Button>\n                </Toolbar>\n            </AppBar>\n        </React.Fragment>\n    );\n}\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}