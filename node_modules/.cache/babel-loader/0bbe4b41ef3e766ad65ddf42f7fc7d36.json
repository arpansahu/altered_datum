{"ast":null,"code":"var _jsxFileName = \"/Users/arpansahu/projects/profile/altered_datum/src/components/auth/activate.js\";\nimport HeaderForGuest from '../headerforguest';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom'; // MaterialUI\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport axiosInstance from '../../axios';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  h4: {\n    color: 'green',\n    '&.error': {\n      color: 'red'\n    }\n  }\n}));\nexport default function ActivateAccount() {\n  const classes = useStyles();\n  const {\n    uidb64,\n    token\n  } = useParams();\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    let isMounted = true; // To avoid state update if the component is unmounted\n\n    axiosInstance.post(`user/account/activate/`, {\n      uidb64: uidb64,\n      token: token\n    }).then(res => {\n      if (isMounted) {\n        setMessage(res.data);\n        setError(false);\n        setTimeout(() => {\n          history.push('/logout');\n        }, 5000);\n      }\n    }).catch(err => {\n      if (isMounted) {\n        console.error('Error during activation:', err);\n        setMessage('Activation failed. Please try again or contact support.');\n        setError(true);\n      }\n    });\n    return () => {\n      isMounted = false; // Cleanup to prevent setting state after unmount\n    };\n  }, [uidb64, token, history]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(HeaderForGuest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    style: {\n      whiteSpace: 'pre-line'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: `${classes.h4} ${error ? 'error' : ''}`,\n    \"aria-live\": \"polite\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }, message))));\n}","map":{"version":3,"sources":["/Users/arpansahu/projects/profile/altered_datum/src/components/auth/activate.js"],"names":["HeaderForGuest","React","useState","useEffect","useParams","useHistory","CssBaseline","makeStyles","Container","axiosInstance","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","h4","color","ActivateAccount","classes","uidb64","token","message","setMessage","error","setError","history","isMounted","post","then","res","data","setTimeout","push","catch","err","console","whiteSpace"],"mappings":"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","sourcesContent":["import HeaderForGuest from '../headerforguest';\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n// MaterialUI\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport axiosInstance from '../../axios';\n\nconst useStyles = makeStyles((theme) => ({\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\th4: {\n\t\tcolor: 'green',\n\t\t'&.error': {\n\t\t\tcolor: 'red',\n\t\t},\n\t},\n}));\n\nexport default function ActivateAccount() {\n\tconst classes = useStyles();\n\tconst { uidb64, token } = useParams();\n\tconst [message, setMessage] = useState('');\n\tconst [error, setError] = useState(false);\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tlet isMounted = true; // To avoid state update if the component is unmounted\n\n\t\taxiosInstance\n\t\t\t.post(`user/account/activate/`, {\n\t\t\t\tuidb64: uidb64,\n\t\t\t\ttoken: token,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (isMounted) {\n\t\t\t\t\tsetMessage(res.data);\n\t\t\t\t\tsetError(false);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\thistory.push('/logout');\n\t\t\t\t\t}, 5000);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (isMounted) {\n\t\t\t\t\tconsole.error('Error during activation:', err);\n\t\t\t\t\tsetMessage('Activation failed. Please try again or contact support.');\n\t\t\t\t\tsetError(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn () => {\n\t\t\tisMounted = false; // Cleanup to prevent setting state after unmount\n\t\t};\n\t}, [uidb64, token, history]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<HeaderForGuest />\n\t\t\t<Container component=\"main\" maxWidth=\"xs\">\n\t\t\t\t<CssBaseline />\n\t\t\t\t<div className={classes.paper} style={{ whiteSpace: 'pre-line' }}>\n\t\t\t\t\t<h4 className={`${classes.h4} ${error ? 'error' : ''}`} aria-live=\"polite\">\n\t\t\t\t\t\t{message}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\t\t\t</Container>\n\t\t</div>\n\t);\n}"]},"metadata":{},"sourceType":"module"}