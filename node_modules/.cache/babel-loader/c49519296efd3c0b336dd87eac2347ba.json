{"ast":null,"code":"import _defineProperty from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axiosInstance from'../../axios';import{useHistory,useParams}from'react-router-dom';//MaterialUI\nimport Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import Header from'../header';var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)}};});export default function Create(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var initialFormData=Object.freeze({id:'',title:'',slug:'',excerpt:'',content:''});var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];useEffect(function(){axiosInstance.get('admin/edit/postdetail/'+id).then(function(res){var _objectSpread2;updateFormData(_objectSpread(_objectSpread({},formData),{},(_objectSpread2={},_defineProperty(_objectSpread2,'title',res.data.title),_defineProperty(_objectSpread2,'excerpt',res.data.excerpt),_defineProperty(_objectSpread2,'slug',res.data.slug),_defineProperty(_objectSpread2,'content',res.data.content),_objectSpread2)));// console.log(res.data);\n});},[updateFormData]);var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value.trim())));};var handleSubmit=function handleSubmit(e){e.preventDefault();// console.log(formData);\naxiosInstance.put(\"admin/edit/\"+id+'/',{title:formData.title,slug:formData.slug,author:1,excerpt:formData.excerpt,content:formData.content}).then(function(response){history.push({pathname:'/admin/'});window.location.reload();}).catch(function(error){console.error('Error editing post:',error);// Handle error, e.g., display an error message to the user\n});};var classes=useStyles();return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"sm\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Edit Post\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"title\",label:\"Post Title\",name:\"title\",autoComplete:\"title\",value:formData.title,onChange:handleChange})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"excerpt\",label:\"Post Excerpt\",name:\"excerpt\",autoComplete:\"excerpt\",value:formData.excerpt,onChange:handleChange,multiline:true,rows:8})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"slug\",label:\"slug\",name:\"slug\",autoComplete:\"slug\",value:formData.slug,onChange:handleChange})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"content\",label:\"content\",name:\"content\",autoComplete:\"content\",value:formData.content,onChange:handleChange,multiline:true,rows:8}))),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:handleSubmit},\"Update Post\")))));}","map":{"version":3,"sources":["/app/src/components/admin/edit.js"],"names":["React","useState","useEffect","axiosInstance","useHistory","useParams","Button","CssBaseline","TextField","Grid","Typography","makeStyles","Container","Header","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","form","width","submit","margin","Create","history","id","initialFormData","Object","freeze","title","slug","excerpt","content","formData","updateFormData","get","then","res","data","handleChange","e","target","name","value","trim","handleSubmit","preventDefault","put","author","response","push","pathname","window","location","reload","catch","error","console","classes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axiosInstance from '../../axios';\nimport { useHistory, useParams } from 'react-router-dom';\n//MaterialUI\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Header from '../header';\n\nconst useStyles = makeStyles((theme) => ({\n\tpaper: {\n\t\tmarginTop: theme.spacing(8),\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'center',\n\t},\n\tform: {\n\t\twidth: '100%', // Fix IE 11 issue.\n\t\tmarginTop: theme.spacing(3),\n\t},\n\tsubmit: {\n\t\tmargin: theme.spacing(3, 0, 2),\n\t},\n}));\n\nexport default function Create() {\n\tconst history = useHistory();\n\tconst { id } = useParams();\n\tconst initialFormData = Object.freeze({\n\t\tid: '',\n\t\ttitle: '',\n\t\tslug: '',\n\t\texcerpt: '',\n\t\tcontent: '',\n\t});\n\n\tconst [formData, updateFormData] = useState(initialFormData);\n\n\tuseEffect(() => {\n\t\taxiosInstance.get('admin/edit/postdetail/' + id).then((res) => {\n\t\t\tupdateFormData({\n\t\t\t\t...formData,\n\t\t\t\t['title']: res.data.title,\n\t\t\t\t['excerpt']: res.data.excerpt,\n\t\t\t\t['slug']: res.data.slug,\n\t\t\t\t['content']: res.data.content,\n\t\t\t});\n\t\t\t// console.log(res.data);\n\t\t});\n\t}, [updateFormData]);\n\n\tconst handleChange = (e) => {\n\t\tupdateFormData({\n\t\t\t...formData,\n\t\t\t// Trimming any whitespace\n\t\t\t[e.target.name]: e.target.value.trim(),\n\t\t});\n\t};\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\t// console.log(formData);\n\n\t\taxiosInstance.put(`admin/edit/` + id + '/', {\n\t\t\ttitle: formData.title,\n\t\t\tslug: formData.slug,\n\t\t\tauthor: 1,\n\t\t\texcerpt: formData.excerpt,\n\t\t\tcontent: formData.content,\n\t\t})\n\t\t.then((response) => {\n\t\t\thistory.push({\n\t\t\t\tpathname: '/admin/',\n\t\t\t});\n\t\t\twindow.location.reload();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error editing post:', error);\n\t\t\t// Handle error, e.g., display an error message to the user\n\t\t});\n\t};\n\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Header />\n\t\t<Container component=\"main\" maxWidth=\"sm\">\n\t\t\t<CssBaseline />\n\t\t\t<div className={classes.paper}>\n\t\t\t\t<Typography component=\"h1\" variant=\"h5\">\n\t\t\t\t\tEdit Post\n\t\t\t\t</Typography>\n\t\t\t\t<form className={classes.form} noValidate>\n\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"title\"\n\t\t\t\t\t\t\t\tlabel=\"Post Title\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tautoComplete=\"title\"\n\t\t\t\t\t\t\t\tvalue={formData.title}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"excerpt\"\n\t\t\t\t\t\t\t\tlabel=\"Post Excerpt\"\n\t\t\t\t\t\t\t\tname=\"excerpt\"\n\t\t\t\t\t\t\t\tautoComplete=\"excerpt\"\n\t\t\t\t\t\t\t\tvalue={formData.excerpt}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={8}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"slug\"\n\t\t\t\t\t\t\t\tlabel=\"slug\"\n\t\t\t\t\t\t\t\tname=\"slug\"\n\t\t\t\t\t\t\t\tautoComplete=\"slug\"\n\t\t\t\t\t\t\t\tvalue={formData.slug}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tid=\"content\"\n\t\t\t\t\t\t\t\tlabel=\"content\"\n\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\tautoComplete=\"content\"\n\t\t\t\t\t\t\t\tvalue={formData.content}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={8}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclassName={classes.submit}\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tUpdate Post\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</Container>\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}